define("local_setcheck/create_template",["jquery","core/ajax"],(function($){return{init:function(){const formElements=$("#create_template_form input, #create_template_form select, #create_template_form textarea"),form=$("#create_template_form"),saveButton=form.find("#id_save_template_button"),cancelButton=form.find("#id_cancel_template_button"),currentUrlWithParams=window.location.href;function markTouched(element){element.attr("data-touched","true")}formElements.each((function(){const element=$(this);element.on("change",(function(){markTouched(element)})),(element.is(":checkbox")||element.is(":radio"))&&element.on("click",(function(){markTouched(element)}))})),saveButton.on("click",(function(event){event.preventDefault();let formData={};formElements.each((function(){const element=$(this);if("true"===element.attr("data-touched")){const settingName=element.attr("id").replace("id_","");formData[settingName]=element.val()}})),formData.template_name=form.find('input[name="template_name"]').val(),$.ajax({url:currentUrlWithParams,method:"POST",data:formData,success:function(response){try{const responseData=JSON.parse(response);responseData.redirect?window.location.href=responseData.redirect:responseData.error&&console.error(responseData.error)}catch(e){console.error("Error parsing JSON response:",e),console.error("Response received:",response)}},error:function(xhr,status,error){console.log("An error occurred while saving the template."),console.log("Status:",status),console.log("Error:",error),console.log("Response:",xhr.responseText)}})})),cancelButton.on("click",(function(event){event.preventDefault(),window.location.href=M.cfg.wwwroot+"/local/setcheck/manage_templates.php"}))}}}));

//# sourceMappingURL=create_template.min.js.map