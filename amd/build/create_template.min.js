define("local_setcheck/create_template",["jquery","core/ajax"],(function($){return{init:function(){const formElements=$("#create_template_form input, #create_template_form select, #create_template_form textarea"),form=$("#create_template_form"),saveButton=form.find("#id_save_template_button"),cancelButton=form.find("#id_cancel_template_button");function markTouched(element){element.attr("data-touched","true")}formElements.each((function(){const element=$(this);element.on("change",(function(){markTouched(element)})),(element.is(":checkbox")||element.is(":radio"))&&element.on("click",(function(){markTouched(element)}))})),saveButton.on("click",(function(){let formData={};formElements.each((function(){const element=$(this);if("true"===element.attr("data-touched")){const settingName=element.attr("id").replace("id_","");formData[settingName]=element.val()}})),formData.template_name=form.find('input[name="template_name"]').val();const queryParams=function(){const params={};return new URLSearchParams(window.location.search).forEach(((value,key)=>{params[key]=value})),params}();formData={...formData,...queryParams},$.ajax({url:form.attr("action"),method:"POST",data:formData,success:function(response){const responseData=JSON.parse(response);responseData.redirect?window.location.href=responseData.redirect:responseData.error&&console.error(responseData.error)},error:function(xhr,status,error){console.error("An error occurred:",error)}})})),cancelButton.on("click",(function(event){event.preventDefault(),window.location.href=M.cfg.wwwroot+"/local/setcheck/pages/manage_templates.php"}))}}}));

//# sourceMappingURL=create_template.min.js.map