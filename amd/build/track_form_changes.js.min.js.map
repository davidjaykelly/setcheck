{"version":3,"file":"track_form_changes.js.min.js","sources":["../src/track_form_changes.js.js"],"sourcesContent":["define(['jquery'], function($) {\n    return {\n        init: function() {\n            // Function called when the JS is loaded.\n\n            // Select all form elements (inputs, selects, textareas) inside the Moodle form.\n            const formElements = $('#mform1 input, #mform1 select, #mform1 textarea');\n\n            // Iterate over each form element to add an event listener for changes.\n            formElements.each(function() {\n                const element = $(this);\n\n                // Event listener to mark element as touched on change.\n                element.on('change', function() {\n                    markTouched(element);\n                });\n\n                // Add event listener for checkboxes and radio buttons.\n                if (element.is(':checkbox') || element.is(':radio')) {\n                    element.on('click', function() {\n                        markTouched(element);\n                    });\n                }\n\n                // If the element is part of a grouped field, handle each part.\n                if (element.hasClass('fdate_time_selector')) {\n                    element.on('change', function() {\n                        const parent = element.closest('.fitem');\n                        if (parent.length) {\n                            parent.find('input, select').each(function() {\n                                markTouched($(this));\n                            });\n                        }\n                    });\n                }\n            });\n\n            /**\n             * Marks a form element as touched when changed.\n             * @param {Object} element - The element to mark as touched.\n             */\n            function markTouched(element) {\n                // Set 'data-touched' attribute to 'true'.\n                element.attr('data-touched', 'true');\n\n                // Find the hidden input for this element and set it to '1'.\n                const touchedInput = $('#' + element.attr('name') + '_touched');\n                if (touchedInput.length) {\n                    touchedInput.val('1');\n                }\n            }\n        }\n    };\n});\n"],"names":["define","$","init","markTouched","element","attr","touchedInput","length","val","each","this","on","is","hasClass","parent","closest","find"],"mappings":"AAAAA,8CAAO,CAAC,WAAW,SAASC,SACjB,CACHC,KAAM,oBAuCOC,YAAYC,SAEjBA,QAAQC,KAAK,eAAgB,cAGvBC,aAAeL,EAAE,IAAMG,QAAQC,KAAK,QAAU,YAChDC,aAAaC,QACbD,aAAaE,IAAI,KA1CJP,EAAE,mDAGVQ,MAAK,iBACRL,QAAUH,EAAES,MAGlBN,QAAQO,GAAG,UAAU,WACjBR,YAAYC,aAIZA,QAAQQ,GAAG,cAAgBR,QAAQQ,GAAG,YACtCR,QAAQO,GAAG,SAAS,WAChBR,YAAYC,YAKhBA,QAAQS,SAAS,wBACjBT,QAAQO,GAAG,UAAU,iBACXG,OAASV,QAAQW,QAAQ,UAC3BD,OAAOP,QACPO,OAAOE,KAAK,iBAAiBP,MAAK,WAC9BN,YAAYF,EAAES"}